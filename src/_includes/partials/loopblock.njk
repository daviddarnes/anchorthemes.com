{% macro loopblock(theme, index) %}
  <article class="article span-3" style="order: {{ index }}" itemscope itemtype="http://schema.org/CreativeWork">
    <figure class="figure">
      <a href="{{ theme.url }}">
        <img itemprop="image" src="{{ theme.url + theme.data.images[0] if theme.data.images else '/assets/images/placeholder-small.gif' }}" alt="{{ theme.title }}" width="440" height="260" />
      </a>
      <span class="buttons">
        {% if theme.data.links.download %}
          <a itemprop="url" href="{{ theme.data.links.download }}" class="button" title="Download {{ theme.title }}">
            <svg class="icon icon-install"><use xlink:href="#icon-install"></use></svg>
          </a>
        {% endif %}
        {% if theme.data.links.repo %}
          <a itemprop="url" href="{{ theme.data.links.repo }}" class="button" target="_blank" rel="noopener" title="View {{ theme.title }} Repo">
            <svg class="icon icon-github"><use xlink:href="#icon-github"></use></svg>
          </a>
        {% endif %}
      </span>
    </figure>
    <div class="hgroup">
      <h2>
        <a itemprop="name" href="{{ theme.url }}">{{ theme.data.title }}</a>
        {% if theme.data.author %}
          {% set authorLine %}
            {% if theme.data.author.url %}
              <a itemprop="creator" target="_blank" rel="noopener" href="{{ theme.data.author.url }}">{{ theme.data.author.name }}</a>
            {% else %}
              {{ theme.data.author.name }}
            {% endif %}
          {% endset %}
          by {{ authorLine | safe }}
        {% endif %}
      </h2>
      <h3>Filed under <a itemprop="genre" href="/category/{{ theme.data.tags[1] | lower | replace(" ", "-") }}">{{ theme.data.tags[1] }}</a></h3>

      <small>Added <time itemprop="dateCreated" datetime="{{ theme.date }}">{{ theme.date.toLocaleDateString("en-GB", { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' }) }}</time></small>
    </div>
  </article>
{% endmacro %}
